function communitySlider(){new Swiper(".community__slider .swiper-container",{slidesPerView:1,spaceBetween:10,pagination:{el:".community__slider .swiper-pagination",type:"bullets",clickable:!0},breakpoints:{320:{slidesPerView:1},576:{slidesPerView:3,spaceBetween:30}}})}function headSlider(){new Swiper(".main__img.swiper-container",{slidesPerView:1,allowTouchMove:!1,effect:"fade",autoplay:{delay:4e3},speed:3e3,fadeEffect:{crossFade:!1},on:{init:function(){let e=document.querySelector(".main__img .swiper-slide-active").getAttribute("data-head-title");document.querySelector(".words-slider").innerHTML=e},slideChange:function(){let e=document.querySelector(".main__img .swiper-slide-next").getAttribute("data-head-title");setTimeout(document.querySelector(".words-slider").innerHTML=e,2e3)}}})}function artSlider(){new Swiper(".main__art-items.swiper-container",{slidesPerView:"auto",loop:!0,autoplay:{delay:4e3},speed:3e3})}function brandSlider(){new Swiper(".community__brands.swiper-container",{slidesPerView:"auto",loop:!0,autoplay:{delay:4e3},speed:3e3})}communitySlider(),headSlider(),artSlider(),brandSlider();
let step1Btn=document.querySelector("[data-step='addDomain']"),step2BackBtn=document.querySelector("[data-step='backStep1']"),step2=document.querySelector(".quiz__step2");step1Btn&&(step1Btn.onclick=function(){step2.classList.add("quiz__step2--active")}),step2BackBtn&&(step2BackBtn.onclick=function(){step2.classList.remove("quiz__step2--active")});
let burger=document.querySelector(".header__burger"),body=document.querySelector("body"),header=document.querySelector("header");burger&&(burger.onclick=function(){header.classList.toggle("header--active"),body.classList.toggle("fixed-body")});const provider=new ethers.providers.Web3Provider(window.ethereum),claim_abi=[{inputs:[{internalType:"string",name:"domain",type:"string"},{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes[]",name:"signatures",type:"bytes[]"}],name:"claim",outputs:[],stateMutability:"nonpayable",type:"function"}];let address,connect_btn=document.querySelector(".connect_btn"),account_btn=document.querySelector(".account_btn");async function connectMetamask(){address&&window.open("/domains","_self"),await provider.send("eth_requestAccounts",[]),checkAccount()}async function checkAccount(){let e=provider.getSigner();if(address=await e.getAddress(),address){connect_btn.innerHTML=address.substr(0,6)+"..."+address.substr(36,4);try{getTXTRecord(),getDomains()}catch(e){console.log()}}}async function claim(){let e=new ethers.Contract("0x3d38fa9B1E78EaA35175B8647b25F41B445dDaCB",claim_abi,provider),t=provider.getSigner();e=e.connect(t);let n=await fetch("/api/airdrop?"+new URLSearchParams({account:await t.getAddress(),domain:"gems.black"})),a=await n.json();e.claim(a.Domain,a.Account,BigInt(a.Value),[ethers.utils.arrayify("0x"+a.Signatures)])}connect_btn.onclick=connectMetamask,checkAccount();let tier=0,offset=0,page=0;async function search(){let e=document.querySelector(".query_value"),t=document.getElementById("results_container"),n=document.getElementById("results_count");if(!t)return;let a=await fetch("/api/search?"+new URLSearchParams({query:e.value,tier:tier,offset:10*page})),i=await a.json();n.innerHTML="About "+i.count+" search results",t.innerHTML="",i.data.forEach(e=>{0==e.Tier&&(e.Tier=1),t.innerHTML+='\n        <div class="domains__row">\n            <div class="domains__info tier'+e.Tier+'">\n                <div class="domains__info-item">'+e.Domain+'</div>\n                <div class="domains__info-item">Tier '+e.Tier+'</div>\n                <div class="domains__info-item">Score: '+10*2**e.Tier+'</div>\n            </div>\n            <a href="https://search.art.art/en?domain='+e.Domain+'" class="domains__link mbtn mbtn-black">Check avalibility</a>\n        </div>\n        '}),pagination(i.count)}async function tiers(){let e=document.getElementById("tiers_buttons");if(e)for(let t=0;t<10;t++){e.children[t].onclick=async function(){tier=0==t?t:10-t,await tiersUpdate(),offset=0,await search()}}}async function tiersUpdate(){let e=document.getElementById("tiers_buttons");if(e)for(let t=0;t<10;t++){let n=e.children[t];n.classList.remove("domains__tab--active"),(0==t&&0==tier||0!=t&&tier==10-t)&&n.classList.add("domains__tab--active")}}async function pagination(e){let t=document.getElementById("pagination_buttons");t.innerHTML="";let n=Math.floor(e/10),a=new Set([0,1,2,page-1,page,page+1,n-2,n-1,n]);if(page<3){let e=Math.floor(n/2);a.add(e-1),a.add(e),a.add(e+1)}a=[...a],a=a.sort((function(e,t){return e-t}));for(let e=0;e<a.length;e++)if(a[e]>=0){e>0&&a[e-1]+1!=a[e]&&(t.innerHTML+="");let n=a[e]==page?"domains__tab--active":"";t.innerHTML+='<a onclick="set_page(event,'+a[e]+')" class="domains__tab '+n+'">'+(a[e]+1)+"</a>"}}async function set_page(e,t){page=t,console.log(e),e.target.classList.add("domains__tab--active"),search(page)}async function getDomains(){let e=document.querySelector(".quiz__table"),t=await fetch("/api/domains?"+new URLSearchParams({account:address})),n=await t.json();e.innerHTML="",n.forEach(t=>{e.innerHTML+='\n        <div class="quiz__row">\n            <div class="quiz__info">\n            <div class="quiz__info-item">'+t.Domain+'</div>\n            <div class="quiz__info-item">Tier '+t.Tier+'</div>\n            <div class="quiz__info-item">Exp '+new Date(t.Exp).toLocaleDateString()+'</div>\n            <div class="quiz__info-item">Score: '+10*2**t.Tier+"</div>\n            </div>\n        </div>"})}async function getTXTRecord(){let e=document.querySelector(".txt_record_field"),t=await fetch("/api/txt-record?"+new URLSearchParams({account:address}));e.value=(await t.json()).txt_record}async function addDomain(){try{let e=provider.getSigner(),t=document.querySelector(".domain_field");await fetch("/api/add-domain?"+new URLSearchParams({account:await e.getAddress(),domain:t.value}))}catch(e){console.log(e)}}search(),tiers();let verify_button=document.querySelector(".verify_btn");verify_button&&(verify_button.onclick=addDomain);
//# sourceMappingURL=../sourcemaps/main.min.js.map
