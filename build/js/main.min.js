function communitySlider(){new Swiper(".community__slider .swiper-container",{slidesPerView:1,spaceBetween:10,pagination:{el:".community__slider .swiper-pagination",type:"bullets",clickable:!0},breakpoints:{320:{slidesPerView:1},576:{slidesPerView:3,spaceBetween:30}}})}function headSlider(){new Swiper(".main__img.swiper-container",{slidesPerView:1,allowTouchMove:!1,effect:"fade",loop:!0,autoplay:{delay:4e3},speed:3e3,fadeEffect:{crossFade:!1},on:{init:function(){let e=document.querySelector(".main__img .swiper-slide-active").getAttribute("data-head-title");document.querySelector(".words-slider").innerHTML=e},slideChange:function(){let e=document.querySelector(".main__img .swiper-slide-next").getAttribute("data-head-title");setTimeout(document.querySelector(".words-slider").innerHTML=e,2e3)}}})}function artSlider(){new Swiper(".main__art-items.swiper-container",{slidesPerView:"auto",loop:!0,autoplay:{delay:4e3},speed:3e3})}function brandSlider(){new Swiper(".community__brands.swiper-container",{slidesPerView:"auto",loop:!0,autoplay:{delay:4e3},speed:3e3})}communitySlider(),artSlider(),brandSlider(),document.addEventListener("DOMContentLoaded",(function(e){headSlider()}));
let step1Btn=document.querySelector("[data-step='addDomain']"),step2BackBtn=document.querySelector("[data-step='backStep1']"),step2=document.querySelector(".quiz__step2");step1Btn&&(step1Btn.onclick=function(){step2.classList.add("quiz__step2--active")}),step2BackBtn&&(step2BackBtn.onclick=function(){step2.classList.remove("quiz__step2--active")});
let burger=document.querySelector(".header__burger"),body=document.querySelector("body"),header=document.querySelector("header");burger&&(burger.onclick=function(){header.classList.toggle("header--active"),body.classList.toggle("fixed-body")});const provider=new ethers.providers.Web3Provider(window.ethereum),claim_abi=[{inputs:[{internalType:"string",name:"domain",type:"string"},{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes[]",name:"signatures",type:"bytes[]"}],name:"claim",outputs:[],stateMutability:"nonpayable",type:"function"}];let address,connect_btn=document.querySelector(".connect_btn"),account_btn=document.querySelector(".account_btn");async function connectMetamask(){address&&window.open("/domains","_self"),await provider.send("eth_requestAccounts",[]),checkAccount()}async function checkAccount(){let e=provider.getSigner();if(address=await e.getAddress(),address){connect_btn.innerHTML=address.substr(0,6)+"..."+address.substr(38,4);try{getTXTRecord(),getDomains()}catch(e){console.log()}}}async function claim(){let e=new ethers.Contract("0x3d38fa9B1E78EaA35175B8647b25F41B445dDaCB",claim_abi,provider),t=provider.getSigner();e=e.connect(t);let a=await fetch("/api/airdrop?"+new URLSearchParams({account:await t.getAddress(),domain:"gems.black"})),n=await a.json();e.claim(n.Domain,n.Account,BigInt(n.Value),[ethers.utils.arrayify("0x"+n.Signatures)])}connect_btn.onclick=connectMetamask,checkAccount();let tier=0,offset=0,page=0;async function onEnter(){let e=document.querySelector(".query_value");e&&e.addEventListener("keypress",(function(e){"Enter"==e.key&&(e.preventDefault(),search())}))}onEnter();let prev_query="";async function search(){let e=document.querySelector(".query_value"),t=document.getElementById("results_container"),a=document.getElementById("results_count"),n=document.getElementById("results_loader");if(!t)return;t.innerHTML="",a.innerHTML="",n.classList.remove("hidden"),e.value!=prev_query&&(page=0,pagination(0)),prev_query=e.value;let i=await fetch("/api/search?"+new URLSearchParams({query:e.value,tier:tier,offset:10*page})),r=await i.json();a.innerHTML="About "+r.count+" search results",t.innerHTML="",r.data.forEach(e=>{0==e.Tier&&(e.Tier=1),t.innerHTML+='\n        <div class="domains__row">\n            <div class="domains__info tier'+e.Tier+'">\n                <div class="domains__info-item">'+e.Domain+'</div>\n                <div class="domains__info-item">Tier '+e.Tier+'</div>\n                <div class="domains__info-item">Score: '+10*2**e.Tier+'</div>\n            </div>\n            <a href="https://search.art.art/en?domain='+e.Domain+'" class="domains__link mbtn mbtn-black">Check avalibility</a>\n        </div>\n        '}),pagination(r.count),n.classList.add("hidden")}async function tiers(){let e=document.getElementById("tiers_buttons");if(e)for(let t=0;t<10;t++){e.children[t].onclick=async function(){tier=0==t?t:10-t,await tiersUpdate(),offset=0,await search()}}}async function tiersUpdate(){let e=document.getElementById("tiers_buttons");if(e)for(let t=0;t<10;t++){let a=e.children[t];a.classList.remove("domains__tab--active"),(0==t&&0==tier||0!=t&&tier==10-t)&&a.classList.add("domains__tab--active")}}async function pagination(e){let t=document.getElementById("pagination_buttons");if(t.innerHTML="",0==e)return;let a=Math.floor(e/10),n=new Set([0,1,2,page-1,page,page+1,a-2,a-1,a]);if(page<3){let e=Math.floor(a/2);n.add(e-1),n.add(e),n.add(e+1)}n=[...n],n=n.sort((function(e,t){return e-t}));for(let e=0;e<n.length;e++)if(n[e]>=0&&n[e]<=a){e>0&&n[e-1]+1!=n[e]&&(t.innerHTML+="");let a=n[e]==page?"domains__tab--active":"";t.innerHTML+='<a onclick="set_page(event,'+n[e]+')" class="domains__tab '+a+'">'+(n[e]+1)+"</a>"}}async function set_page(e,t){page=t,console.log(e),e.target.classList.add("domains__tab--active"),search(page)}async function getDomains(){let e=document.getElementById("tokens_count"),t=document.querySelector(".quiz__table"),a=await fetch("/api/domains?"+new URLSearchParams({account:address})),n=await a.json();t.innerHTML="";let i=0;n.forEach(e=>{i+=10*2**e.Tier,t.innerHTML+='\n        <div class="domains__row">\n            <div class="domains__info tier'+e.Tier+'">\n                <div class="domains__info-item">'+e.Domain+'</div>\n                <div class="domains__info-item">Tier '+e.Tier+'</div>\n                <div class="domains__info-item">Exp '+new Date(e.Exp).toLocaleDateString()+'</div>\n                <div class="domains__info-item">Score: '+10*2**e.Tier+"</div>\n            </div>\n        </div>"}),e.innerHTML=i+" tokens"}async function getTXTRecord(){let e=document.querySelector(".txt_record_field"),t=await fetch("/api/txt-record?"+new URLSearchParams({account:address}));e.value=(await t.json()).txt_record}function copyTXTRecord(){navigator.clipboard.writeText(document.querySelector(".txt_record_field").value)}async function addDomain(){let e=provider.getSigner(),t=document.querySelector(".domain_field");if(t.parentElement.classList.remove("quiz__fg_error"),t.value=t.value.toLowerCase(),!/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.art$/.test(t.value))return t.parentElement.classList.add("quiz__fg_error"),void alert("Please, make sure the domain is .art");200==(await fetch("/api/add-domain?"+new URLSearchParams({account:await e.getAddress(),domain:t.value}))).status?(await getDomains(),document.querySelector(".quiz__step2").classList.remove("quiz__step2--active")):alert("Please, check TXT record and try it later")}async function suggestion(){let e=document.querySelector(".find__search-link");if(!e)return;let t=await fetch("/api/search?"+new URLSearchParams({suggestion:!0})),a=await t.json();e.innerHTML=a.data[0].Domain,e.href="https://search.art.art/en?domain="+a.data[0].Domain}async function addEmail(e){fetch("/api/add-email?email="+document.getElementById("subscriber_email").value),e.preventDefault(),document.getElementById("subscriber_email").value=""}search(),tiers(),suggestion();
//# sourceMappingURL=../sourcemaps/main.min.js.map
