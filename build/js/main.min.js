function communitySlider(){new Swiper(".community__slider .swiper-container",{slidesPerView:1,spaceBetween:10,pagination:{el:".community__slider .swiper-pagination",type:"bullets",clickable:!0},breakpoints:{320:{slidesPerView:1},576:{slidesPerView:3,spaceBetween:30}}})}function headSlider(){new Swiper(".main__img.swiper-container",{slidesPerView:1,effect:"fade",autoplay:{delay:4e3},speed:3e3,fadeEffect:{crossFade:!1}})}function artSlider(){new Swiper(".main__art-items.swiper-container",{slidesPerView:"auto",loop:!0,autoplay:{delay:4e3},speed:3e3})}function brandSlider(){new Swiper(".community__brands.swiper-container",{slidesPerView:"auto",loop:!0,autoplay:{delay:4e3},speed:3e3})}communitySlider(),headSlider(),artSlider(),brandSlider();
let step1Btn=document.querySelector("[data-step='addDomain']"),step2BackBtn=document.querySelector("[data-step='backStep1']"),step2=document.querySelector(".quiz__step2");step1Btn&&(step1Btn.onclick=function(){step2.classList.add("quiz__step2--active")}),step2BackBtn&&(step2BackBtn.onclick=function(){step2.classList.remove("quiz__step2--active")});
let burger=document.querySelector(".header__burger"),body=document.querySelector("body"),header=document.querySelector("header");burger&&(burger.onclick=function(){header.classList.toggle("header--active"),body.classList.toggle("fixed-body")});const provider=new ethers.providers.Web3Provider(window.ethereum),claim_abi=[{inputs:[{internalType:"string",name:"domain",type:"string"},{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes[]",name:"signatures",type:"bytes[]"}],name:"claim",outputs:[],stateMutability:"nonpayable",type:"function"}];let address,connect_btn=document.querySelector(".connect_btn"),account_btn=document.querySelector(".account_btn");async function connectMetamask(){address&&window.open("/domains","_self"),await provider.send("eth_requestAccounts",[]),checkAccount()}async function checkAccount(){let e=provider.getSigner();if(address=await e.getAddress(),address){connect_btn.innerHTML=address.substr(0,6)+"..."+address.substr(36,4);try{getTXTRecord(),getDomains()}catch(e){console.log()}}}async function claim(){let e=new ethers.Contract("0x3d38fa9B1E78EaA35175B8647b25F41B445dDaCB",claim_abi,provider),n=provider.getSigner();e=e.connect(n);let t=await fetch("/api/airdrop?"+new URLSearchParams({account:await n.getAddress(),domain:"gems.black"})),a=await t.json();console.log(a),e.claim(a.Domain,a.Account,BigInt(a.Value),[ethers.utils.arrayify("0x"+a.Signatures)])}async function search(){console.log;let e=document.querySelector(".query_value"),n=document.querySelector(".container_result"),t=await fetch("/api/search?"+new URLSearchParams({query:e.value})),a=await t.json();n.innerHTML="",a.forEach(e=>{n.innerHTML+='\n        <div class="quiz__row">\n            <div class="quiz__info">\n            <div class="quiz__info-item">'+e.Domain+'</div>\n            <div class="quiz__info-item">Tier '+e.Tier+'</div>\n            <div class="quiz__info-item"><a href="https://search.art.art/en?domain='+e.Domain+'">check</a></div>\n            <div class="quiz__info-item">Score: '+10*2**e.Tier+"</div>\n            </div>\n        </div>"})}async function getDomains(){let e=document.querySelector(".quiz__table"),n=await fetch("/api/domains?"+new URLSearchParams({account:address})),t=await n.json();e.innerHTML="",t.forEach(n=>{e.innerHTML+='\n        <div class="quiz__row">\n            <div class="quiz__info">\n            <div class="quiz__info-item">'+n.Domain+'</div>\n            <div class="quiz__info-item">Tier '+n.Tier+'</div>\n            <div class="quiz__info-item">Exp '+new Date(n.Exp).toLocaleDateString()+'</div>\n            <div class="quiz__info-item">Score: '+10*2**n.Tier+"</div>\n            </div>\n        </div>"})}async function getTXTRecord(){let e=document.querySelector(".txt_record_field"),n=await fetch("/api/txt-record?"+new URLSearchParams({account:address}));e.value=(await n.json()).txt_record}async function addDomain(){try{let e=provider.getSigner(),n=document.querySelector(".domain_field");await fetch("/api/add-domain?"+new URLSearchParams({account:await e.getAddress(),domain:n.value}))}catch(e){console.log(e)}}connect_btn.onclick=connectMetamask,checkAccount();let verify_button=document.querySelector(".verify_btn");verify_button&&(verify_button.onclick=addDomain);
//# sourceMappingURL=../sourcemaps/main.min.js.map
